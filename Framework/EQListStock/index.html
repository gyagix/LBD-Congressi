<!-- Include Alpine.js -->
<script src="https://jwsite.sharepoint.com/sites/ita-lbd-bethelfacilitysupport/LBDSharepoint%20Code/Framework/vendors/alpine.min.js" defer></script>

<div x-data="EQListStockApp()" x-init="init()">
	
		<div class="filter-list">
			<button class="button-icon button-add" @click="newRecord(null)">
				<svg width="24" height="24" viewBox="0 0 24 24" aria-label="Nuovo" role="img"
					fill="none" stroke="#000000" stroke-width="6" stroke-linecap="round" stroke-linejoin="round">
					<path d="M12 5v14M5 12h14"/>
				</svg>
			</button>
			<button class="button-icon button-add" @click="openEditTableListShowHide()">
				<svg xmlns="http://www.w3.org/2000/svg"
					width="20" height="20" viewBox="0 0 24 24"
					fill="none" stroke="#000000" stroke-width="1"
					stroke-linecap="round" stroke-linejoin="round">               
				<!-- occhio sbarrato -->
				<path d="M21 12c-1.8 3-5 5-9 5s-7.2-2-9-5c1.8-3 5-5 9-5s7.2 2 9 5z"/>
				<line x1="3" y1="3" x2="20" y2="20"/>
				</svg>
			</button>
			<input
				class="input-search"
				type="text"
				placeholder="Cerca..."
				x-model="search"
				@input="filterEvents"
				style="margin-bottom: 1em; width: 100%; padding: 6px;"
			/>
		</div>
		
  <!-- Pannello FORM -->
  <section class="form-panel">
    <h2>Gestione Equipment List Stock Models</h2>

    <form @submit.prevent="saveEQListStock">
      <input type="hidden" x-model="form.Id" />

      <div>
        <label>Model Code</label>
        <input type="text" x-model="form.ModelCode" required />
      </div>

      <div>
        <label>Model Description</label>
        <textarea cols="60" rows="4" x-model="form.ModelDescription"></textarea>
      </div>

      <div>
        <label>Stock Quantity</label>
        <input type="number" x-model="form.StockQuantity" />
      </div>

      <div>
        <label>Categoria Equipment</label>
        <input type="text" x-model="form.EQCategory" />
      </div>

      <div>
        <label>Discontinued</label>
        <input type="checkbox" x-model="form.Discontinued" />
      </div>

      <button type="submit" x-text="form.Id ? 'Aggiorna EQ List Stock' : 'Aggiungi EQ List Stock'"></button>
      <button type="button" @click="resetForm">Reset</button>
    </form>
    <div class="list-toolbar">
      <input
        type="text"
        placeholder="Cerca..."
        x-model="search"
        @input="filterEQModels()"
      />
    </div>    
  </section>

  <!-- Pannello LISTA -->
  <section class="list-panel">	
    <div class="list-scroll">
		
      <table>
        <thead>
          <tr>
            <th @click="sortBy('Id')">ID</th>
            <th @click="sortBy('ModelCode')">Model Code</th>
            <th @click="sortBy('ModelDescription')">Model Description</th>
            <th @click="sortBy('StockQuantity')">Stock Quantity</th>
            <th @click="sortBy('EQCategory')">EQ Category</th>
            <th @click="sortBy('Discontinued')">Discontinued</th>
            <th>Azioni</th>
          </tr>
        </thead>
        <tbody>
          <template x-for="item in filteredEQModels" :key="item.Id">
            <tr>
              <td x-text="item.Id"></td>
              <td x-text="item.ModelCode"></td>
              <td x-text="item.ModelDescription"></td>
              <td x-text="item.StockQuantity"></td>
              <td x-text="item.EQCategory"></td>
              <td x-text="item.Discontinued"></td>
              <td>
                <button @click="editEQListItemStock(item)">‚úèÔ∏è</button>
                <button @click="deleteEQListStock(item.Id)">üóëÔ∏è</button>
              </td>
            </tr>
          </template>
        </tbody>
      </table>
    </div>
  </section>
</div>
